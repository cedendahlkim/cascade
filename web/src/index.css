@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #root {
  height: 100%;
  height: 100dvh;
  margin: 0;
  padding: 0;
  overflow: hidden;
  position: fixed;
  width: 100%;
}

/* === Trading UI surface === */
.trading-surface {
  /* Deep terminal gradient + subtle cyan/emerald aura */
  background:
    radial-gradient(900px circle at 15% 10%, rgba(34, 211, 238, 0.12), transparent 52%),
    radial-gradient(900px circle at 85% 15%, rgba(16, 185, 129, 0.10), transparent 55%),
    radial-gradient(900px circle at 55% 85%, rgba(248, 113, 113, 0.09), transparent 58%),
    linear-gradient(180deg, rgba(2, 6, 23, 1), rgba(15, 23, 42, 1));
}

.trading-card {
  border: 1px solid rgba(51, 65, 85, 0.55);
  background: linear-gradient(180deg, rgba(15, 23, 42, 0.74), rgba(2, 6, 23, 0.72));
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
}

.segmented {
  display: inline-flex;
  gap: 0.25rem;
  padding: 0.25rem;
  border-radius: 9999px;
  border: 1px solid rgba(51, 65, 85, 0.55);
  background: rgba(2, 6, 23, 0.45);
}

.segmented-btn {
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-size: 11px;
  color: rgba(203, 213, 225, 0.85);
  border: 1px solid transparent;
  transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;
}

.segmented-btn:hover {
  color: rgba(255, 255, 255, 0.95);
}

.segmented-btn-active {
  background: rgba(30, 41, 59, 0.7);
  border-color: rgba(148, 163, 184, 0.22);
  color: rgba(255, 255, 255, 0.96);
}

/* Smooth scrolling for chat */
.chat-scroll {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* Pulse animation for connection indicator */
@keyframes pulse-dot {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}
.animate-pulse-dot {
  animation: pulse-dot 2s ease-in-out infinite;
}

/* === AI Status Animations === */

/* Thinking – pulsing brain glow */
@keyframes thinking-pulse {
  0%, 100% { transform: scale(1); opacity: 0.7; filter: blur(0px); }
  50% { transform: scale(1.15); opacity: 1; filter: blur(1px); }
}
@keyframes thinking-dots {
  0% { content: ''; }
  25% { content: '.'; }
  50% { content: '..'; }
  75% { content: '...'; }
}
.status-thinking .status-icon {
  animation: thinking-pulse 1.5s ease-in-out infinite;
}
.status-thinking .status-dots::after {
  content: '';
  animation: thinking-dots 1.2s steps(4, end) infinite;
}

/* Memory – sparkle/save effect */
@keyframes memory-sparkle {
  0% { transform: scale(0.8) rotate(0deg); opacity: 0.5; }
  50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
  100% { transform: scale(0.8) rotate(360deg); opacity: 0.5; }
}
.status-memory .status-icon {
  animation: memory-sparkle 1.2s ease-in-out infinite;
}

/* Filesystem – scanning lines */
@keyframes fs-scan {
  0% { transform: translateY(-100%); opacity: 0; }
  30% { opacity: 1; }
  100% { transform: translateY(100%); opacity: 0; }
}
.status-filesystem .status-icon {
  animation: thinking-pulse 1s ease-in-out infinite;
  color: #60a5fa;
}
.status-filesystem .scan-line {
  position: absolute;
  left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, #60a5fa, transparent);
  animation: fs-scan 1s ease-in-out infinite;
}

/* Search – rotating magnifier */
@keyframes search-rotate {
  0% { transform: rotate(0deg) scale(1); }
  25% { transform: rotate(-15deg) scale(1.1); }
  50% { transform: rotate(15deg) scale(1); }
  75% { transform: rotate(-10deg) scale(1.05); }
  100% { transform: rotate(0deg) scale(1); }
}
.status-search .status-icon {
  animation: search-rotate 0.8s ease-in-out infinite;
}

/* Command – terminal blink */
@keyframes terminal-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}
@keyframes terminal-type {
  0% { width: 0; }
  100% { width: 100%; }
}
.status-command .status-icon {
  animation: thinking-pulse 0.8s ease-in-out infinite;
  color: #34d399;
}
.status-command .cursor-blink {
  display: inline-block;
  width: 2px;
  height: 14px;
  background: #34d399;
  margin-left: 2px;
  animation: terminal-blink 0.7s step-end infinite;
}

/* Process – spinning gear */
@keyframes gear-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
.status-process .status-icon {
  animation: gear-spin 2s linear infinite;
}

/* System – radar sweep */
@keyframes radar-sweep {
  0% { transform: rotate(0deg); opacity: 0.6; }
  100% { transform: rotate(360deg); opacity: 0.6; }
}
.status-system .status-icon {
  animation: gear-spin 1.5s linear infinite;
  color: #a78bfa;
}

/* Security – shield pulse */
@keyframes shield-pulse {
  0%, 100% { transform: scale(1); filter: drop-shadow(0 0 0px #f59e0b); }
  50% { transform: scale(1.1); filter: drop-shadow(0 0 8px #f59e0b); }
}
.status-security .status-icon {
  animation: shield-pulse 1s ease-in-out infinite;
}

/* Status bar slide-in */
@keyframes slide-up {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}
@keyframes slide-down {
  from { transform: translateY(0); opacity: 1; }
  to { transform: translateY(100%); opacity: 0; }
}
.status-bar-enter {
  animation: slide-up 0.3s ease-out forwards;
}
.status-bar-exit {
  animation: slide-down 0.2s ease-in forwards;
}

/* Glow effect for status bar */
.status-glow-thinking { box-shadow: 0 -2px 20px rgba(168, 85, 247, 0.3); }
.status-glow-memory { box-shadow: 0 -2px 20px rgba(251, 191, 36, 0.3); }
.status-glow-filesystem { box-shadow: 0 -2px 20px rgba(96, 165, 250, 0.3); }
.status-glow-search { box-shadow: 0 -2px 20px rgba(244, 114, 182, 0.3); }
.status-glow-command { box-shadow: 0 -2px 20px rgba(52, 211, 153, 0.3); }
.status-glow-process { box-shadow: 0 -2px 20px rgba(251, 146, 60, 0.3); }
.status-glow-system { box-shadow: 0 -2px 20px rgba(167, 139, 250, 0.3); }
.status-glow-security { box-shadow: 0 -2px 20px rgba(245, 158, 11, 0.3); }
.status-glow-desktop { box-shadow: 0 -2px 20px rgba(34, 211, 238, 0.3); }

/* Desktop – eye scanning */
@keyframes eye-scan {
  0%, 100% { transform: scaleY(1); }
  10% { transform: scaleY(0.1); }
  20% { transform: scaleY(1); }
}
.status-desktop .status-icon {
  animation: eye-scan 2s ease-in-out infinite;
  color: #22d3ee;
}

/* === Message animations === */
@keyframes msg-slide-in-right {
  from { opacity: 0; transform: translateX(40px) scale(0.95); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}
@keyframes msg-slide-in-left {
  from { opacity: 0; transform: translateX(-40px) scale(0.95); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}
.msg-user { animation: msg-slide-in-right 0.3s ease-out; }
.msg-cascade { animation: msg-slide-in-left 0.35s ease-out; }

/* Typing indicator */
@keyframes typing-bounce {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-6px); opacity: 1; }
}
.typing-dot:nth-child(1) { animation: typing-bounce 1.2s ease-in-out infinite 0s; }
.typing-dot:nth-child(2) { animation: typing-bounce 1.2s ease-in-out infinite 0.15s; }
.typing-dot:nth-child(3) { animation: typing-bounce 1.2s ease-in-out infinite 0.3s; }

/* Token counter pulse */
@keyframes token-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}
.token-update { animation: token-pulse 0.4s ease-out; }

/* Particle burst on tool complete */
@keyframes particle-burst {
  0% { transform: scale(0); opacity: 1; }
  50% { transform: scale(1.5); opacity: 0.6; }
  100% { transform: scale(2); opacity: 0; }
}
.tool-complete-burst {
  position: absolute;
  inset: -4px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(96, 165, 250, 0.4) 0%, transparent 70%);
  animation: particle-burst 0.5s ease-out forwards;
  pointer-events: none;
}

/* Ripple effect on send */
@keyframes send-ripple {
  0% { transform: scale(0.8); opacity: 0.6; }
  100% { transform: scale(2.5); opacity: 0; }
}
.send-ripple {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: rgba(59, 130, 246, 0.3);
  animation: send-ripple 0.5s ease-out forwards;
  pointer-events: none;
}

/* Number counter animation */
@keyframes count-up {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.count-animate { animation: count-up 0.3s ease-out; }

/* === Page & Content Transitions === */

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fade-in-scale {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
.animate-fade-in { animation: fade-in 0.3s ease-out; }
.animate-fade-in-up { animation: fade-in-up 0.35s ease-out; }
.animate-fade-in-scale { animation: fade-in-scale 0.3s ease-out; }

/* Staggered list items */
@keyframes stagger-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.stagger-item {
  opacity: 0;
  animation: stagger-in 0.3s ease-out forwards;
}
.stagger-item:nth-child(1) { animation-delay: 0.03s; }
.stagger-item:nth-child(2) { animation-delay: 0.06s; }
.stagger-item:nth-child(3) { animation-delay: 0.09s; }
.stagger-item:nth-child(4) { animation-delay: 0.12s; }
.stagger-item:nth-child(5) { animation-delay: 0.15s; }
.stagger-item:nth-child(6) { animation-delay: 0.18s; }
.stagger-item:nth-child(7) { animation-delay: 0.21s; }
.stagger-item:nth-child(8) { animation-delay: 0.24s; }

/* === Glassmorphism === */
/* Solid backgrounds instead of backdrop-filter to prevent GPU flicker on mobile */
.glass {
  background: rgba(15, 23, 42, 0.97);
}
.glass-subtle {
  background: rgba(15, 23, 42, 0.92);
}
/* Enable blur only on devices that handle it well (hover = mouse/trackpad) */
@media (hover: hover) {
  .glass {
    background: rgba(15, 23, 42, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  .glass-subtle {
    background: rgba(15, 23, 42, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
}

/* === Bottom Tab Bar === */
.tab-item {
  position: relative;
  transition: color 0.2s ease, transform 0.15s ease;
}
.tab-item:active {
  transform: scale(0.92);
}
.tab-item-active {
  color: #60a5fa;
}
.tab-item-active::after {
  content: '';
  position: absolute;
  top: -1px;
  left: 25%;
  right: 25%;
  height: 2px;
  background: linear-gradient(90deg, transparent, #60a5fa, transparent);
  border-radius: 2px;
  animation: tab-glow-in 0.3s ease-out;
}
@keyframes tab-glow-in {
  from { opacity: 0; left: 45%; right: 45%; }
  to { opacity: 1; left: 25%; right: 25%; }
}
.tab-icon-active {
  filter: drop-shadow(0 0 6px rgba(96, 165, 250, 0.5));
  animation: tab-icon-pop 0.25s ease-out;
}
@keyframes tab-icon-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

/* === Card Hover Effects === */
.card-hover {
  transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}
.card-hover:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}
.card-hover:active {
  transform: translateY(0) scale(0.98);
}

/* === Empty State === */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
.empty-icon {
  animation: float 3s ease-in-out infinite;
}

/* === Arena Message Animations === */
@keyframes arena-msg-left {
  from { opacity: 0; transform: translateX(-20px) scale(0.96); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}
@keyframes arena-msg-right {
  from { opacity: 0; transform: translateX(20px) scale(0.96); }
  to { opacity: 1; transform: translateX(0) scale(1); }
}
@keyframes arena-msg-center {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}
.arena-msg-left { animation: arena-msg-left 0.35s ease-out; }
.arena-msg-right { animation: arena-msg-right 0.35s ease-out; }
.arena-msg-center { animation: arena-msg-center 0.3s ease-out; }

/* === Suggestion Button Hover === */
.suggestion-btn {
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
}
.suggestion-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.08), transparent);
  opacity: 0;
  transition: opacity 0.2s ease;
}
.suggestion-btn:hover::before {
  opacity: 1;
}
.suggestion-btn:hover {
  transform: translateX(4px);
  border-color: rgba(96, 165, 250, 0.4);
}

/* === Gradient Shimmer (for loading states) === */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.shimmer {
  background: linear-gradient(90deg, transparent 25%, rgba(148, 163, 184, 0.08) 50%, transparent 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* === Header Gradient Line === */
.header-glow {
  position: relative;
}
.header-glow::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(96, 165, 250, 0.3), rgba(167, 139, 250, 0.3), transparent);
}

/* === Conversation Sidebar === */
@keyframes slide-in-left {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}
.animate-slide-in-left {
  animation: slide-in-left 0.25s ease-out;
}

/* === Mobile chat fixes === */
@media (max-width: 640px) {
  /* Prevent any horizontal overflow in chat messages */
  .prose pre {
    max-width: calc(100vw - 3rem);
    font-size: 11px;
  }
  .prose table {
    display: block;
    overflow-x: auto;
    max-width: calc(100vw - 3rem);
    font-size: 12px;
  }
  .prose img {
    max-width: 100%;
    height: auto;
  }
}

/* === Smooth scrollbar === */
.chat-scroll::-webkit-scrollbar {
  width: 4px;
}
.chat-scroll::-webkit-scrollbar-track {
  background: transparent;
}
.chat-scroll::-webkit-scrollbar-thumb {
  background: rgba(100, 116, 139, 0.3);
  border-radius: 4px;
}
.chat-scroll::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 116, 139, 0.5);
}
